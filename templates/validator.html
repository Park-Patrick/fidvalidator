{% extends "base.html" %}
{% block title %} | VALIDATOR {% endblock %}

{% block content %}
    <div class="container">
      <div class="row">
        <section class="col-9">
          <div class="row">
              <div class="col-9">
                  <p>Use the following form to compare user placed fiducials to one of the available templates!
                  </p>
              </div>
          </div>

          <!-- Template submission form -->
          <form method=post action="" enctype="multipart/form-data">
            <!-- Dropdown for template selection -->
            <fieldset class="form-group">
              <legend>Select a template to compare against.</legend>
              <select class="form-control" name="fid_template" method="GET" action="/">
                <option value="Validate .fcsv file structure">Validate .fcsv file structure</option>></option>
                <optgroup label="Human">
                  {% for human_template in human_templates %}
                  <option value="{{human_template}}">{{human_template}}</option>
                  {% endfor %}
                </optgroup>
              </select>
            </fieldset>

            <!-- User template "upload" -->
            <fieldset class="form-group">
              <legend>Select the AFIDs FCSV to validate.</legend>
              {% for field in form %}
              {{ field }}
              {% if field.errors %}
              <ul class="errors">
                {% for error in field.errors %}
                <li>{{ error }}</li>
                {% endfor %}
              </ul>
              {% endif %}
              {% endfor %}
            </fieldset>
	    <input type="checkbox" id="db_checkbox" name="db_checkbox"/>
	    <label for="db_checkbox">Upload to Database</label>
          </form>

          <div class="row">
              <div class="col-sm-7">
                  <h2>Results</h2>
              </div>
          </div>
          <div class="row">
              <div class="col-sm-7">
                  {% if result != None %}
                  {{ result|safe }}
                  {% endif %}
              </div>
          </div>
          <div class="row">
            <!-- Numerical results -->
            <div class="text col-sm-6">
              <table class="table table-dark table-sm">
                <tr>
                  <th scope="col">{{"Fiducial Name"}}</th>
                  <th scope="col">{{"Distance [mm]"}}</th></tr>
                {% for i in index %}
                <tr><td>{{labels[i]}}</td><td>{{distances[i]}}</td></tr>
                {% endfor %}
              </table>
            </div>

            <!-- Visual results -->
            <div class="col-sm-6">
                {{visualization_html|safe}}
            </div>
          </div>
        </section>

        <!-- Analytics -->
        <!-- <section class="col">
          <a class="btn btn-light" href="/getall">View DB</a>
          <a class="btn btn-light" href="/analytics">Analytics</a>
        </section> -->
      </div>
    </div>
{% endblock %}
